package application;

import com.jfoenix.controls.JFXComboBox;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.control.TableView;
import javafx.scene.control.cell.PropertyValueFactory;

public class TicketsController extends MainWindowController{
	
	@FXML private JFXComboBox<String> ticketSelection;
	@FXML private Button sendInvitationButton;
	
	private Main main;
	
	private static ObservableList<String> ticketData = FXCollections.observableArrayList();
	public static ObservableList<String> getTicketData() { return ticketData; }
	
	public void setMain(Main main){
		this.main = main;
		eventView.setItems(getEventData());
	}
	
	public void initialize(){
		Datasource datasource = new Datasource();
		datasource.open();
		eventData = datasource.queryEvents();

		
		eventView.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);
		eventNameColumn.setCellValueFactory(new PropertyValueFactory<Event, String>("EventName"));
		eventView.getSelectionModel().selectedItemProperty().addListener(
				(observable, oldValue, newValue) -> showInfo(newValue));
		ticketData = datasource.queryTicketName();
		ticketSelection.setItems(ticketData);
	}
	
	
	public void showInfo(Event event){		
		eventNameLabel.setText(event.getEventName());
		
	}

}
